{"ast":null,"code":"import { UntypedFormControl, UntypedFormGroup } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/questions.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/reponses.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/progress-spinner\";\nimport * as i8 from \"../decompte/decompte.component\";\nimport * as i9 from \"../victoire/victoire.component\";\nfunction JouerComponent_div_0_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction JouerComponent_div_0_div_1_mat_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 2)(1, \"mat-card-title\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-card-content\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"La Question \", ctx_r5.question.id_question, \" :\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.question.libelle, \" \");\n  }\n}\nfunction JouerComponent_div_0_div_1_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 5);\n    i0.ɵɵlistener(\"click\", function JouerComponent_div_0_div_1_div_3_div_1_Template_input_click_3_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r9.selectOk());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const r_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r8.libelle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"name\", r_r8.id_reponse);\n    i0.ɵɵpropertyInterpolate(\"value\", r_r8.libelle);\n  }\n}\nfunction JouerComponent_div_0_div_1_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, JouerComponent_div_0_div_1_div_3_div_1_Template, 4, 3, \"div\", 3);\n    i0.ɵɵelementStart(2, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function JouerComponent_div_0_div_1_div_3_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r11.submitCheckbox());\n    });\n    i0.ɵɵtext(3, \"Envoyer !\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.reponses);\n  }\n}\nfunction JouerComponent_div_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, JouerComponent_div_0_div_1_ng_container_1_Template, 2, 0, \"ng-container\", 0);\n    i0.ɵɵtemplate(2, JouerComponent_div_0_div_1_mat_card_2_Template, 5, 2, \"mat-card\", 1);\n    i0.ɵɵtemplate(3, JouerComponent_div_0_div_1_div_3_Template, 4, 1, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.estSoumis);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.estSoumis);\n  }\n}\nfunction JouerComponent_div_0_div_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction JouerComponent_div_0_div_2_mat_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 2)(1, \"mat-card-title\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-card-content\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"La Question \", ctx_r14.numQuestion, \" :\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r14.question.libelle, \" \");\n  }\n}\nfunction JouerComponent_div_0_div_2_form_5_label_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵelement(1, \"input\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const r_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", r_r17.id_reponse);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", r_r17.libelle, \" \");\n  }\n}\nfunction JouerComponent_div_0_div_2_form_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 8);\n    i0.ɵɵlistener(\"ngSubmit\", function JouerComponent_div_0_div_2_form_5_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r18.submitBook());\n    });\n    i0.ɵɵtemplate(1, JouerComponent_div_0_div_2_form_5_label_1_Template, 3, 2, \"label\", 3);\n    i0.ɵɵelementStart(2, \"button\", 9);\n    i0.ɵɵtext(3, \"Envoyer ! \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r15.repForm);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r15.reponses);\n  }\n}\nfunction JouerComponent_div_0_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, JouerComponent_div_0_div_2_ng_container_1_Template, 2, 0, \"ng-container\", 0);\n    i0.ɵɵtemplate(2, JouerComponent_div_0_div_2_mat_card_2_Template, 5, 2, \"mat-card\", 1);\n    i0.ɵɵelementStart(3, \"h1\");\n    i0.ɵɵelement(4, \"app-decompte\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, JouerComponent_div_0_div_2_form_5_Template, 4, 2, \"form\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.estSoumis);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.loading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"tempsTime\", ctx_r3.nbSecondesEntreQuestion)(\"question\", ctx_r3.numQuestion);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.estSoumis);\n  }\n}\nfunction JouerComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, JouerComponent_div_0_div_1_Template, 4, 3, \"div\", 0);\n    i0.ɵɵtemplate(2, JouerComponent_div_0_div_2_Template, 6, 5, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.categorieChoisi != 2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.categorieChoisi == 2);\n  }\n}\nfunction JouerComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-victoire\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"score\", ctx_r1.score);\n  }\n}\nexport let JouerComponent = /*#__PURE__*/(() => {\n  class JouerComponent {\n    constructor(questionsService, route, reponsesService, fb) {\n      this.questionsService = questionsService;\n      this.route = route;\n      this.reponsesService = reponsesService;\n      this.fb = fb;\n      this.question = {};\n      this.reponses = [];\n      this.loading = false;\n      this.tabReponse = [];\n      this.score = 0;\n      this.nbSecondesEntreQuestion = 15;\n      this.valInterval = this.nbSecondesEntreQuestion * 1000;\n      this.estSoumis = false;\n      this.numQuestion = 0;\n      this.id = 0;\n      this.estSelect = false;\n      this.estFini = false;\n      this.repForm = new UntypedFormGroup({\n        title: new UntypedFormControl()\n      });\n    }\n    selectOk() {\n      this.estSelect = true;\n    }\n    afficheQuestion() {\n      this.estSoumis = false;\n      this.estSelect = false;\n      this.numQuestion++;\n      if (this.current.length > 0) {\n        this.id = this.current[this.current.length - 1].id_question;\n        this.questionsService.getQuestion(this.id).subscribe(question => {\n          this.question = question;\n          this.reponsesService.getReponses(this.id).subscribe(reponses => {\n            this.reponses = reponses;\n            this.loading = false;\n          });\n        });\n        this.current.pop();\n      } else {\n        this.estFini = true;\n      }\n    }\n    valueOfRep(rep, idQuestion, idReponse) {\n      this.estSoumis = true;\n      let tabRep = [idQuestion, idReponse, rep];\n      this.tabReponse.push(tabRep);\n      if (rep) {\n        this.score++;\n      }\n      console.log(this.tabReponse);\n    }\n    ngOnChanges(changes) {\n      if (this.current.length > 0) {\n        this.afficheQuestion();\n        let a = setInterval(() => {\n          this.afficheQuestion();\n        }, this.valInterval);\n      }\n    }\n    // cette fonction est appelée lorsque l'on utilise le mode sel et poivre\n    submitBook() {\n      this.estSoumis = true;\n      let rep = [];\n      console.log(this.repForm.value.title);\n      this.reponsesService.getReponses(this.id).subscribe(value => {\n        let a = value.filter(q => q.id_reponse == this.repForm.value.title)[0];\n        this.valueOfRep(a.bonne_reponse, a.id_question, a.id_reponse);\n      });\n    }\n    submitCheckbox() {\n      let tabDeRep = [];\n      let truc = document.querySelectorAll('.checkbox');\n      truc.forEach((elt, key) => {\n        if (elt.checked) tabDeRep.push(key);\n      });\n      let tabRepDeRetour = [];\n      for (let r of tabDeRep) {\n        tabRepDeRetour.push(this.reponses[r]);\n      }\n      this.valueOfRepMultiple(tabRepDeRetour);\n    }\n    valueOfRepMultiple(tab) {\n      this.estSoumis = true;\n      let tabBonneRep = [];\n      for (let r of this.reponses) {\n        if (r.bonne_reponse) {\n          tabBonneRep.push(r);\n        }\n      }\n      let tabRep = [tab[0].id_question, tab];\n      this.tabReponse.push(tabRep);\n      let ok = true;\n      for (let r of tab) {\n        if (tabBonneRep.indexOf(r) == -1) {\n          ok = false;\n        }\n      }\n      if (tab.length == tabBonneRep.length && ok) {\n        this.score++;\n      }\n    }\n    ngOnInit() {}\n  }\n  JouerComponent.ɵfac = function JouerComponent_Factory(t) {\n    return new (t || JouerComponent)(i0.ɵɵdirectiveInject(i1.QuestionsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ReponsesService), i0.ɵɵdirectiveInject(i4.UntypedFormBuilder));\n  };\n  JouerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: JouerComponent,\n    selectors: [[\"app-jouer\"]],\n    inputs: {\n      current: [\"tabQ\", \"current\"],\n      categorieChoisi: [\"categorie\", \"categorieChoisi\"]\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [\"style\", \"text-align: center\", 4, \"ngIf\"], [2, \"text-align\", \"center\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [\"type\", \"checkbox\", \"id\", \"\", 1, \"checkbox\", 3, \"name\", \"value\", \"click\"], [3, \"tempsTime\", \"question\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"submit\"], [\"type\", \"radio\", \"formControlName\", \"title\", 3, \"value\"], [3, \"score\"]],\n    template: function JouerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, JouerComponent_div_0_Template, 3, 2, \"div\", 0);\n        i0.ɵɵtemplate(1, JouerComponent_div_1_Template, 2, 1, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.estFini);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.estFini);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.MatCard, i6.MatCardContent, i6.MatCardTitle, i7.MatSpinner, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.RadioControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i8.DecompteComponent, i9.VictoireComponent]\n  });\n  return JouerComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}